---
title:  起码要能看懂c系列的代码
date:   2019-08-29 11:35:00 +0800
categories: ["笔记"]
tags: ["c","c++"]
keywords: ["c","c++"]
draft: true
description: "之前在一些文章里面就有说过。程序员是绕不过JavaScript的，即使有时候会恶心到人。。而很多硬件的嵌入式开发，算法工程师，底层开发人员则真的可以做一辈子，而免疫JavaScript的侵扰。而JavaScript的每一个改动，都多多少少与c/c++有关。可以说大神们用c/c++构建了现在数字化的底层逻辑。比c更底层的，晦涩难懂效率低下。比c高级的，性能下降概念繁多。和c同级别的，都没有c混得好。c是事实标准"
---

> 之前在一些文章里面就有说过。程序员是绕不过JavaScript的，即使有时候会恶心到人。。
>
> 而很多硬件的嵌入式开发，算法工程师，底层开发人员则真的可以做一辈子，而免疫JavaScript的侵扰。而JavaScript的每一个改动，都多多少少与c/c++有关。
>
> 可以说大神们用c/c++构建了现在数字化的底层逻辑。比c更底层的，晦涩难懂效率低下。比c高级的，性能下降概念繁多。和c同级别的，都没有c混得好。事实上c是事实标准。

前言
===

如果你从来没有了解过编程，而想学习c。那么去搜新手教程慢慢上手。

如果你有其他编程的基础。这篇文章能用来让你快速了解c代码。可以在你不得不去看c代码的时候，看懂他的意图。


基本了解
===

类型
---

二进制的c表达，需要用代码实现

```python
# python用0b开头
a = 0b101
```

八进制

```c
// c用0开头
int a = 08
```

```python
# python用0o开头  数字0和字母o
a = 0o516
```

十六进制

```c
// c用0x开头
int a = 0x2A
```

```python
# python用0x开头
a = 0x2A
```

其中int是2个字节。long int是4个字节。

而float是4个字节。double是8个字节。long double是16个字节。注意在计算的时候，可能存在舍入误差。

char一个字符一个字节。

字符串则会比char多出来一个尾部的`\0`字节。

unsigned则代表没有符号位。例如int类型前面都会有一个符号位。没有符号位则会扩大int的可存储范围

附带补充一点知识。
![C_补码](/images/c/C_补码.png)



数组

```c
int a[10];
// 10个长度，空位补0
int b[10]={1,2,3,4,5};
// 自动检测到长度
int b[]={1,2,3,4,5};
```

而字符串就这样表示
```c
// 长度会是4，因为后面还有一个\0
char c[]="C a";
```

说几个常用的字符串函数吧
1. `strcat`合并
2. `strcpy`拷贝
3. `strcmp`比较
4. `strlen`拿到字符串长度

函数部分
---

1. 函数其实没什么好说的。记得除了库函数(自带标准库),都要定义一下。才能用。
2. 全局变量默认在静态存储区。
3. 加了`static`的局部变量也在静态存储区。
4. `register`的变量会放在寄存器，会提高性能。
5. 外部变量用`extern`声明，则可以在代码中使用。

预处理命令
---

1. `#define PI 3.1415`用PI替代代码中的3.1415。`#undef PI`取消。
```c
// 可以带参数。
#define SQ(y) (y)*(y)
/* 但注意扩起来。否则可能结果有误 */
/* 例如sq=SQ(a+1)会变成sq=a+1*a+1 */
```
2. `#include "stdio.h"`引入头文件。一般都用双引号先从当前目录查找。
3. `#ifdef #else #endif`用来判断执行。`#if`则非0则为true。


指针
---

示例代码
```c
// 声明int变量a和int指针*p
int a,*p;
a=10;
// 把a的地址给p
p=&a;
// 现在用*p即可取到a的值
printf('%d',*p);
```

1. 指针如果指向数组，则默认指向数组的第一个元素。可以通过`*(p+1)`取到第二个元素的值。字符串同理。
2. 函数也是占用连续的内存段。则`int (*pf)();`代表指向一个返回值是int的函数。当指针赋值后，通过`(*pmax)(a)`调用。
3. `int *ap(int x,int y)`代表返回指针。



语法 | 说明
--- | ---
int i; | 定义整型变量 i
int *p; | p 为指向整型数据的指针变量
int a[n]; | 定义整型数组 a，它有 n 个元素
int *p[n]; | 定义指针数组 p，它由 n 个指向整型数据的指针元素组成
int (*p)[n]; | p 为指向含 n 个元素的一维数组的指针变量
int f(); | f 为带回整型函数值的函数
int *p(); | p 为带回一个指针的函数，该指针指向整型数据
int (*p)(); | p 为指向函数的指针，该函数返回一个整型值
int **p; | P 是一个指针变量，它指向一个指向整型数据的指针变量


编译
===

简单来说，编译就是使用`gcc`,`make`,`cmake`等工具来进行的。

如果使用vs或者clion这样的工具，需要了解的是工具的使用方法。而下面我要简单说明的是手工编译。

1. 在项目目录下新建build文件夹。
2. 进入build文件夹使用`cmake ..`生成Makefile
3. 运行make命令编译成功，找到输出文件即可。

linux
---
我在centos7上运行`gcc`,`make`,`cmake`都可以正常使用。

mac
---
用brew安装cmake后，也可以跑通。

windows
---
我是用的[scoop](https://scoop.sh/)安装cmake。

然后安装最新的vs。下载`mingw-get`，然后安装`mingw32-make`。
```bash
cmake -G   "MinGW Makefiles" . # .为当前目录, "MinGW Makefiles"为makefile类型，如果编译器为vs的话使用"NMake Makefiles"
```
看到了Makefile后mingw32-make即可。

难点
===

记录一下难以理解的地方。

指针数组和数组指针
---
在看书的时候，了解到main函数可以接受2个参数。而main函数不能被其他函数调用(有一些编译器不管你这么多，也能编译通过。但是制定标准的委员会明确表明了**不行**)。

`int argc`代表单数的个数。包括程序自己本身。

`char *argv[]`代表一个指向字符串的指针数组。


总结
===

好久都没有写博客了..也不知道自己在折腾什么..

c/c++还是很重要的。。